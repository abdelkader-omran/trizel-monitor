{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/abdelkader-omran/trizel-monitor/spec/raw_record.schema.json",
  "title": "Raw Data Record Schema",
  "description": "Schema for raw data acquisition records in the TRIZEL Monitor project",
  "type": "object",
  "required": ["record_version", "source", "acquisition", "integrity", "raw_data_ref"],
  "properties": {
    "record_version": {
      "type": "string",
      "description": "Version of this record schema",
      "const": "1.0"
    },
    "source": {
      "type": "object",
      "description": "Information about the data source",
      "required": ["source_id", "endpoint_id", "endpoint_url"],
      "properties": {
        "source_id": {
          "type": "string",
          "description": "Identifier for the data source (must match sources.json)"
        },
        "endpoint_id": {
          "type": "string",
          "description": "Specific endpoint identifier (must match sources.json)"
        },
        "endpoint_url": {
          "type": "string",
          "format": "uri",
          "description": "Full URL of the endpoint"
        }
      }
    },
    "acquisition": {
      "type": "object",
      "description": "Details about the data acquisition",
      "required": ["retrieved_utc", "query_parameters"],
      "properties": {
        "retrieved_utc": {
          "type": "string",
          "format": "date-time",
          "description": "UTC timestamp when data was retrieved (ISO-8601)"
        },
        "query_parameters": {
          "type": "object",
          "description": "Parameters used in the request"
        },
        "http_status": {
          "type": "integer",
          "description": "HTTP status code of the response"
        },
        "response_headers": {
          "type": "object",
          "description": "Relevant HTTP response headers"
        }
      }
    },
    "integrity": {
      "type": "object",
      "description": "Integrity verification information",
      "required": ["sha256"],
      "properties": {
        "sha256": {
          "type": "string",
          "pattern": "^[a-f0-9]{64}$",
          "description": "SHA-256 hash of the raw data file"
        },
        "size_bytes": {
          "type": "integer",
          "minimum": 0,
          "description": "Size of the raw data file in bytes"
        }
      }
    },
    "raw_data_ref": {
      "type": "object",
      "description": "Reference to the stored raw data",
      "required": ["relative_path", "format"],
      "properties": {
        "relative_path": {
          "type": "string",
          "description": "Path to raw data file relative to repository root"
        },
        "format": {
          "type": "string",
          "description": "Format of the raw data (e.g., json, xml, text)"
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Optional metadata about the acquisition",
      "properties": {
        "target": {
          "type": "string",
          "description": "Target object being queried"
        },
        "notes": {
          "type": "string",
          "description": "Any additional notes about the acquisition"
        }
      }
    }
  }
}
